{"version":3,"file":"view.js","mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,KAAK,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;AAE9C,IAAIF,KAAK,EAAE;EACT,MAAMG,OAAO,GAAGH,KAAK,CAACE,aAAa,CAAC,UAAU,CAAC;EAC/C,MAAME,YAAY,GAAGJ,KAAK,CAACE,aAAa,CAAC,eAAe,CAAC;EACzD,MAAMG,QAAQ,GAAGL,KAAK,CAACM,OAAO,CAACD,QAAQ,IAAI,EAAE;EAC7C;EACA,MAAME,QAAQ,GAAGP,KAAK,CAACE,aAAa,CAAC,gBAAgB,CAAC;EACtD,MAAMM,QAAQ,GAAGR,KAAK,CAACE,aAAa,CAAC,gBAAgB,CAAC;EAEtD,MAAMO,aAAa,GAAGA,CAAA,KAAM;IAC1BF,QAAQ,CAACG,SAAS,CAACC,MAAM,CAAC,QAAQ,CAAC;IACnCH,QAAQ,CAACE,SAAS,CAACC,MAAM,CAAC,QAAQ,CAAC;EACrC,CAAC;EAED,MAAMC,UAAU,GAAGA,CAAA,KAAM;IACvBC,QAAQ,GAAGR,QAAQ;IACnBS,SAAS,GAAG,KAAK;IACjBX,OAAO,CAACY,SAAS,GAAG,EAAE;IACtBN,aAAa,CAAC,CAAC;EACjB,CAAC;EAED,IAAII,QAAQ,GAAGR,QAAQ;EACvB,IAAIS,SAAS,GAAG,KAAK;EAErBP,QAAQ,CAACS,gBAAgB,CAAC,OAAO,EAAE,MAAM;IACvCP,aAAa,CAAC,CAAC;IACfK,SAAS,GAAG,IAAI;IAEhB,IAAIG,QAAQ,GAAGC,WAAW,CAAC,MAAM;MAC/B,IAAIL,QAAQ,KAAK,CAAC,EAAE;QAClBD,UAAU,CAAC,CAAC;QACZO,aAAa,CAACF,QAAQ,CAAC;MACzB;MAEA,IAAIH,SAAS,IAAID,QAAQ,GAAG,CAAC,EAAE;QAC7BA,QAAQ,IAAI,CAAC;QAEbV,OAAO,CAACiB,SAAS,GAAGP,QAAQ;QAC5BT,YAAY,CAACiB,KAAK,CAACC,gBAAgB,GAAI,GAAG,IAAIjB,QAAQ,GAAGQ,QAAQ,CAAC,GAAIR,QAAQ;QAC9ED,YAAY,CAACW,SAAS,GAAG,EAAE;QAC3BZ,OAAO,CAACY,SAAS,GAAG,EAAE;QAEtB,IAAIF,QAAQ,GAAGR,QAAQ,GAAG,CAAC,GAAG,CAAC,EAAE;UAC/BD,YAAY,CAACM,SAAS,CAACa,GAAG,CAAC,OAAO,CAAC;UACnCpB,OAAO,CAACO,SAAS,CAACa,GAAG,CAAC,OAAO,CAAC;QAChC,CAAC,MAAM,IAAIV,QAAQ,GAAGR,QAAQ,GAAG,CAAC,EAAE;UAClCD,YAAY,CAACM,SAAS,CAACa,GAAG,CAAC,QAAQ,CAAC;UACpCpB,OAAO,CAACO,SAAS,CAACa,GAAG,CAAC,QAAQ,CAAC;QACjC,CAAC,MAAM;UACLnB,YAAY,CAACM,SAAS,CAACa,GAAG,CAAC,KAAK,CAAC;UACjCpB,OAAO,CAACO,SAAS,CAACa,GAAG,CAAC,KAAK,CAAC;QAC9B;MACF;IACF,CAAC,EAAE,IAAI,CAAC;EACV,CAAC,CAAC;EAEFf,QAAQ,CAACQ,gBAAgB,CAAC,OAAO,EAAE,MAAM;IACvCF,SAAS,GAAG,CAACA,SAAS;EACxB,CAAC,CAAC;AACJ,C","sources":["webpack://timer-block/./src/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\nconst timer = document.querySelector('.timer');\n\nif (timer) {\n  const seconds = timer.querySelector('#seconds');\n  const timerseconds = timer.querySelector('#timerseconds');\n  const duration = timer.dataset.duration || 60;\n  // Buttons\n  const startBtn = timer.querySelector('.btn.btn-start');\n  const pauseBtn = timer.querySelector('.btn.btn-pause');\n\n  const toggleButtons = () => {\n    startBtn.classList.toggle('d-none');\n    pauseBtn.classList.toggle('d-none');\n  }\n\n  const resetState = () => {\n    timeleft = duration;\n    isRunning = false;\n    seconds.className = \"\";\n    toggleButtons();\n  }\n\n  let timeleft = duration;\n  let isRunning = false;\n\n  startBtn.addEventListener('click', () => {\n    toggleButtons();\n    isRunning = true;\n\n    let interval = setInterval(() => {\n      if (timeleft === 0) {\n        resetState();\n        clearInterval(interval);\n      }\n\n      if (isRunning && timeleft > 0) {\n        timeleft -= 1;\n\n        seconds.innerHTML = timeleft;\n        timerseconds.style.strokeDashoffset = (440 * (duration - timeleft)) / duration;\n        timerseconds.className = \"\";\n        seconds.className = \"\";\n\n        if (timeleft > duration / 3 * 2) {\n          timerseconds.classList.add(\"green\");\n          seconds.classList.add(\"green\");\n        } else if (timeleft > duration / 3) {\n          timerseconds.classList.add(\"yellow\");\n          seconds.classList.add(\"yellow\");\n        } else {\n          timerseconds.classList.add(\"red\");\n          seconds.classList.add(\"red\");\n        }\n      }\n    }, 1000);\n  });\n\n  pauseBtn.addEventListener('click', () => {\n    isRunning = !isRunning;\n  });\n}"],"names":["timer","document","querySelector","seconds","timerseconds","duration","dataset","startBtn","pauseBtn","toggleButtons","classList","toggle","resetState","timeleft","isRunning","className","addEventListener","interval","setInterval","clearInterval","innerHTML","style","strokeDashoffset","add"],"sourceRoot":""}