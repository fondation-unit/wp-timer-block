{"version":3,"file":"view.js","mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,SAASA,gBAAgBA,CAACC,OAAO,EAAE;EACjC,IAAIC,aAAa,GAAG,IAAIC,IAAI,CAACF,OAAO,GAAG,IAAI,CAAC,CAACG,WAAW,CAAC,CAAC,CAACC,SAAS,CAAC,EAAE,EAAE,EAAE,CAAC;;EAE5E;EACA,IAAIH,aAAa,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;IAC5BA,aAAa,GAAGA,aAAa,CAACG,SAAS,CAAC,CAAC,CAAC;EAC5C;EAEA,OAAOH,aAAa;AACtB;AAGA,SAASI,eAAeA,CAACC,UAAU,EAAE;EACnC;EACA,MAAMN,OAAO,GAAGM,UAAU,CAACC,aAAa,CAAC,UAAU,CAAC;EACpD,MAAMC,YAAY,GAAGF,UAAU,CAACC,aAAa,CAAC,eAAe,CAAC;;EAE9D;EACA,MAAME,QAAQ,GAAGH,UAAU,CAACC,aAAa,CAAC,gBAAgB,CAAC;EAC3D,MAAMG,QAAQ,GAAGJ,UAAU,CAACC,aAAa,CAAC,gBAAgB,CAAC;;EAE3D;EACA,MAAMI,QAAQ,GAAGL,UAAU,CAACM,OAAO,CAACD,QAAQ,IAAI,EAAE;IAChDE,IAAI,GAAGP,UAAU,CAACM,OAAO,CAACC,IAAI;IAC9BC,MAAM,GAAGR,UAAU,CAACM,OAAO,CAACE,MAAM;EACpC,IAAIC,QAAQ,GAAGJ,QAAQ;EACvB,IAAIK,SAAS,GAAG,KAAK;EAErB,MAAMC,aAAa,GAAGA,CAAA,KAAM;IAC1BR,QAAQ,CAACS,SAAS,CAACC,MAAM,CAAC,QAAQ,CAAC;IACnCT,QAAQ,CAACQ,SAAS,CAACC,MAAM,CAAC,QAAQ,CAAC;EACrC,CAAC;EAED,MAAMC,UAAU,GAAGA,CAAA,KAAM;IACvBL,QAAQ,GAAGJ,QAAQ;IACnBK,SAAS,GAAG,KAAK;IACjBhB,OAAO,CAACqB,SAAS,GAAG,EAAE;IACtBJ,aAAa,CAAC,CAAC;EACjB,CAAC;EAEDR,QAAQ,CAACa,gBAAgB,CAAC,OAAO,EAAE,MAAM;IACvCL,aAAa,CAAC,CAAC;IACfD,SAAS,GAAG,IAAI;IAEhB,IAAIO,QAAQ,GAAGC,WAAW,CAAC,MAAM;MAC/B,IAAIT,QAAQ,KAAK,CAAC,EAAE;QAClBK,UAAU,CAAC,CAAC;QACZK,aAAa,CAACF,QAAQ,CAAC;MACzB;MAEA,IAAIP,SAAS,IAAID,QAAQ,GAAG,CAAC,EAAE;QAC7BA,QAAQ,IAAI,CAAC;QAEbf,OAAO,CAACqB,SAAS,GAAG,EAAE;QACtBrB,OAAO,CAAC0B,SAAS,GAAG,CAACb,IAAI,IAAIA,IAAI,IAAI,SAAS,GAAGd,gBAAgB,CAACgB,QAAQ,CAAC,GAAGA,QAAQ;QACtFP,YAAY,CAACmB,YAAY,CAAC,OAAO,EAAE,EAAE,CAAC;QACtCnB,YAAY,CAACoB,KAAK,CAACC,gBAAgB,GAAI,GAAG,IAAIlB,QAAQ,GAAGI,QAAQ,CAAC,GAAIJ,QAAQ;QAE9E,IAAIG,MAAM,KAAK,MAAM,EAAE;UACrB,IAAIC,QAAQ,GAAGJ,QAAQ,GAAG,CAAC,GAAG,CAAC,EAAE;YAC/BH,YAAY,CAACU,SAAS,CAACY,GAAG,CAAC,OAAO,CAAC;YACnC9B,OAAO,CAACkB,SAAS,CAACY,GAAG,CAAC,OAAO,CAAC;UAChC,CAAC,MAAM,IAAIf,QAAQ,GAAGJ,QAAQ,GAAG,CAAC,EAAE;YAClCH,YAAY,CAACU,SAAS,CAACY,GAAG,CAAC,QAAQ,CAAC;YACpC9B,OAAO,CAACkB,SAAS,CAACY,GAAG,CAAC,QAAQ,CAAC;UACjC,CAAC,MAAM;YACLtB,YAAY,CAACU,SAAS,CAACY,GAAG,CAAC,KAAK,CAAC;YACjC9B,OAAO,CAACkB,SAAS,CAACY,GAAG,CAAC,KAAK,CAAC;UAC9B;QACF,CAAC,MAAM;UACLtB,YAAY,CAACU,SAAS,CAACY,GAAG,CAAC,OAAO,CAAC;UACnC9B,OAAO,CAACkB,SAAS,CAACY,GAAG,CAAC,OAAO,CAAC;QAChC;MACF;IACF,CAAC,EAAE,IAAI,CAAC;EACV,CAAC,CAAC;EAEFpB,QAAQ,CAACY,gBAAgB,CAAC,OAAO,EAAE,MAAM;IACvCN,SAAS,GAAG,CAACA,SAAS;EACxB,CAAC,CAAC;AACJ;AAGA,MAAMe,MAAM,GAAGC,QAAQ,CAACC,gBAAgB,CAAC,QAAQ,CAAC;AAClDF,MAAM,CAACG,OAAO,CAAC5B,UAAU,IAAI;EAC3BD,eAAe,CAACC,UAAU,CAAC;AAC7B,CAAC,CAAC,C","sources":["webpack://timer-block/./src/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\n\nfunction convertToMinutes(seconds) {\n  let formattedTime = new Date(seconds * 1000).toISOString().substring(14, 19);\n\n  // Remove leading '0' from minutes if minutes start with '0'\n  if (formattedTime[0] === '0') {\n    formattedTime = formattedTime.substring(1);\n  }\n\n  return formattedTime;\n}\n\n\nfunction initializeTimer(timerBlock) {\n  // Elements\n  const seconds = timerBlock.querySelector('#seconds');\n  const timerseconds = timerBlock.querySelector('#timerseconds');\n\n  // Buttons\n  const startBtn = timerBlock.querySelector('.btn.btn-start');\n  const pauseBtn = timerBlock.querySelector('.btn.btn-pause');\n\n  // State\n  const duration = timerBlock.dataset.duration || 60,\n    unit = timerBlock.dataset.unit,\n    colors = timerBlock.dataset.colors;\n  let timeleft = duration;\n  let isRunning = false;\n\n  const toggleButtons = () => {\n    startBtn.classList.toggle('d-none');\n    pauseBtn.classList.toggle('d-none');\n  }\n\n  const resetState = () => {\n    timeleft = duration;\n    isRunning = false;\n    seconds.className = \"\";\n    toggleButtons();\n  }\n\n  startBtn.addEventListener('click', () => {\n    toggleButtons();\n    isRunning = true;\n\n    let interval = setInterval(() => {\n      if (timeleft === 0) {\n        resetState();\n        clearInterval(interval);\n      }\n\n      if (isRunning && timeleft > 0) {\n        timeleft -= 1;\n\n        seconds.className = \"\";\n        seconds.innerHTML = !unit || unit == 'minutes' ? convertToMinutes(timeleft) : timeleft;\n        timerseconds.setAttribute('class', '');\n        timerseconds.style.strokeDashoffset = (440 * (duration - timeleft)) / duration;\n\n        if (colors === \"true\") {\n          if (timeleft > duration / 3 * 2) {\n            timerseconds.classList.add(\"green\");\n            seconds.classList.add(\"green\");\n          } else if (timeleft > duration / 3) {\n            timerseconds.classList.add(\"yellow\");\n            seconds.classList.add(\"yellow\");\n          } else {\n            timerseconds.classList.add(\"red\");\n            seconds.classList.add(\"red\");\n          }\n        } else {\n          timerseconds.classList.add(\"green\");\n          seconds.classList.add(\"green\");\n        }\n      }\n    }, 1000);\n  });\n\n  pauseBtn.addEventListener('click', () => {\n    isRunning = !isRunning;\n  });\n}\n\n\nconst timers = document.querySelectorAll('.timer');\ntimers.forEach(timerBlock => {\n  initializeTimer(timerBlock);\n});"],"names":["convertToMinutes","seconds","formattedTime","Date","toISOString","substring","initializeTimer","timerBlock","querySelector","timerseconds","startBtn","pauseBtn","duration","dataset","unit","colors","timeleft","isRunning","toggleButtons","classList","toggle","resetState","className","addEventListener","interval","setInterval","clearInterval","innerHTML","setAttribute","style","strokeDashoffset","add","timers","document","querySelectorAll","forEach"],"sourceRoot":""}